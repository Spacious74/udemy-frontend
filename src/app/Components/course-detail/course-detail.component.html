<p-toast></p-toast>
<div class="detail-container relative ">
    <div class="course-header py-7 ">
        <div class="container mx-auto flex align-items-center justify-content-between ">
            <div class="details w-7 flex flex-column gap-3">
                <div class="title text-0 ">
                    {{selectedCourse?.title}}
                </div>
                <div class="subtitle">
                    {{selectedCourse?.subTitle}}
                </div>

                <div class="ratingStudents text-sm flex align-items-center gap-3 ">
                    <div class="rating flex gap-2 ">
                        <span class="px-2 border-round text-900 font-bold border-1 ">
                            4.5
                        </span>
                        <span style="color :#ffbb00;" class="stars flex gap-1 align-items-center">
                            <i class="pi pi-star-fill" style="font-size: 0.8rem;"></i>
                            <i class="pi pi-star-fill" style="font-size: 0.8rem;"></i>
                            <i class="pi pi-star-fill" style="font-size: 0.8rem;"></i>
                            <i class="pi pi-star-fill" style="font-size: 0.8rem;"></i>
                            <i class="pi pi-star-fill" style="font-size: 0.8rem;"></i>
                        </span> (21,941 ratings)
                    </div>
                    <div class="students flex align-items-center gap-2 ">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="20" viewBox="0 0 640 512">
                            <path fill="currentColor"
                                d="M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64s-64 28.7-64 64s28.7 64 64 64m448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64s-64 28.7-64 64s28.7 64 64 64m32 32h-64c-17.6 0-33.5 7.1-45.1 18.6c40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64m-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32S208 82.1 208 144s50.1 112 112 112m76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2m-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4" />
                        </svg>
                        {{selectedCourse?.totalStudentsPurchased}} students
                    </div>
                </div>
                <div class="price">
                    ₹ {{selectedCourse?.price}}
                </div>
                <div class="langUpdate  text-sm flex align-items-center gap-3">
                    <div class="language flex align-items-center gap-2 ">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 36 36">
                            <path fill="currentColor" d="m11 16.5l-1 3.1h2z" class="clr-i-solid clr-i-solid-path-1" />
                            <path fill="currentColor"
                                d="M30.3 3h-16v5h4v2h-13c-1.7 0-3 1.3-3 3v11c0 1.7 1.3 3 3 3h1v5.1l6.3-5.1h6.7v-7h11c1.7 0 3-1.3 3-3V6c0-1.7-1.3-3-3-3M13.1 22.9l-.5-1.6H9.5l-.6 1.6H6.5L9.8 14h2.4l3.3 8.9zM28.3 15v2c-1.3 0-2.7-.4-3.9-1c-1.2.6-2.6.9-4 1l-.1-2q1.05 0 2.1-.3c-.9-.9-1.5-2-1.8-3.2h2.1c.3.9.9 1.6 1.6 2.2c1.1-.9 1.8-2.2 1.9-3.7h-6V8h3V6h2v2h3.3l.1 1c.1 2.1-.7 4.2-2.2 5.7c.7.2 1.3.3 1.9.3"
                                class="clr-i-solid clr-i-solid-path-2" />
                            <path fill="none" d="M0 0h36v36H0z" />
                        </svg>
                        {{selectedCourse?.language}}
                    </div>
                    <div class="lastupdated">
                        Last updated : {{selectedCourse?.updatedAt | date:"dd-MMM-yyyy"}}
                    </div>
                </div>
                <div class="instructor text-sm ">
                    Created by {{selectedCourse?.educator?.edname}}
                </div>

            </div>
            <div class="imgcont w-4 p-fluid">
                <img [src]="selectedCourse?.coursePoster.url" alt="course poster"
                    class="w-full h-12rem border-1 border-green-300 border-round-lg mb-2" style="object-fit: cover;" />
                <div *ngIf="!isEnrolled" class="btncont p-fluid flex gap-2 cursor-pointer">
                    <p-button class="w-full" label="Buy now" (onClick)="checkOutHandler()"></p-button>

                    <p-button *ngIf="!existInCart" (click)="addToCart()" class="w-full"
                        [icon]="loading ?'pi pi-spin pi-spinner' : 'pi pi-cart-plus'"
                        [label]="loading ? 'Loading...' : 'Add to cart'" [outlined]="true"></p-button>

                    <p-button *ngIf="existInCart" class="w-full" icon="pi pi-check" label="In Cart"
                        [outlined]="true"></p-button>
                </div>
                <p-button *ngIf="isEnrolled" class="w-full" icon="pi pi-check" label="Go to Learning"></p-button>
            </div>
        </div>
    </div>
    <div *ngIf="showCard" class="courseCard overflow-hidden border-round-lg shadow-4 pb-2 w-3 surface-0 ">
        <div class="imgcont w-full">
            <img [src]="selectedCourse?.coursePoster.url" alt="course-detail picture"
                class="w-full h-12rem border-1 border-green-300 border-round-lg" style="object-fit: cover;" />
        </div>
        <div class="p-3 p-fluid">
            <div class="text-lg">
                {{selectedCourse?.title}}
            </div>
            <div class="pricetext-600 text-lg py-3 font-bold ">
                ₹ {{selectedCourse?.price}}
            </div>
            <div *ngIf="!isEnrolled" class="btncont mt-2 p-fluid flex gap-2 cursor-pointer">
                <p-button class="w-full" label="Buy now" (onClick)="checkOutHandler()"></p-button>

                <p-button *ngIf="!existInCart" (click)="addToCart()" class="w-full"
                    [icon]="loading ?'pi pi-spin pi-spinner' : 'pi pi-cart-plus'"
                    [label]="loading ? 'Loading...' : 'Add to cart'" [outlined]="true"></p-button>

                <p-button *ngIf="existInCart" class="w-full" icon="pi pi-check" label="In Cart"
                    [outlined]="true"></p-button>
            </div>
            <p-button *ngIf="isEnrolled" class="w-full" icon="pi pi-check" label="Go to Learning"></p-button>
        </div>
    </div>
    <div class="container mx-auto mb-8 ">
        <div class="section py-4 mt-4 ">
            <div class="head">
                This course includes
            </div>
            <div class="flex flex-wrap align-items-center gap-3 justify-content-left  w-7 ">
                <span class="flex align-items-center gap-1 ">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                        <g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd">
                            <path
                                d="M11.075 7.508c-1.329-.784-2.825.283-2.825 1.705v5.574c0 1.422 1.496 2.489 2.825 1.705l4.72-2.787c1.273-.752 1.273-2.658 0-3.41zM9.75 9.213c0-.198.096-.337.21-.408a.32.32 0 0 1 .352-.005l4.72 2.787a.47.47 0 0 1 .218.413a.47.47 0 0 1-.218.413l-4.72 2.787a.32.32 0 0 1-.353-.005a.47.47 0 0 1-.209-.408z" />
                            <path
                                d="M12 1.25C6.063 1.25 1.25 6.063 1.25 12S6.063 22.75 12 22.75S22.75 17.937 22.75 12S17.937 1.25 12 1.25M2.75 12a9.25 9.25 0 1 1 18.5 0a9.25 9.25 0 0 1-18.5 0" />
                        </g>
                    </svg>
                    {{selectedCourse?.totalLectures}} lectures
                </span>
                <span class="flex align-items-center gap-1 ">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                        <g fill="none" stroke="currentColor" stroke-width="1.5">
                            <path
                                d="M11.146 7.023C11.526 6.34 11.716 6 12 6s.474.34.854 1.023l.098.176c.108.194.162.29.246.354c.085.064.19.088.4.135l.19.044c.738.167 1.107.25 1.195.532s-.164.577-.667 1.165l-.13.152c-.143.167-.215.25-.247.354s-.021.215 0 .438l.02.203c.076.785.114 1.178-.115 1.352c-.23.174-.576.015-1.267-.303l-.178-.082c-.197-.09-.295-.135-.399-.135s-.202.045-.399.135l-.178.082c-.691.319-1.037.477-1.267.303s-.191-.567-.115-1.352l.02-.203c.021-.223.032-.334 0-.438s-.104-.187-.247-.354l-.13-.152c-.503-.588-.755-.882-.667-1.165c.088-.282.457-.365 1.195-.532l.19-.044c.21-.047.315-.07.4-.135c.084-.064.138-.16.246-.354z" />
                            <path d="M19 9A7 7 0 1 1 5 9a7 7 0 0 1 14 0Z" />
                            <path
                                d="m12 16.068l-3.771 3.905c-.54.56-.81.839-1.04.935c-.52.22-1.099.032-1.373-.448c-.12-.21-.158-.59-.232-1.35c-.043-.43-.064-.644-.128-.824a1.43 1.43 0 0 0-.835-.864c-.173-.067-.38-.088-.795-.132c-.734-.078-1.101-.117-1.305-.241c-.463-.284-.646-.883-.433-1.422c.094-.237.364-.517.904-1.076L5.456 12M12 16.068l3.771 3.905c.54.56.81.839 1.04.935c.52.22 1.099.032 1.373-.448c.12-.21.157-.59.232-1.35c.043-.43.064-.644.128-.824c.144-.402.446-.715.835-.864c.173-.067.38-.088.795-.132c.734-.078 1.101-.117 1.305-.241c.463-.284.646-.883.433-1.422c-.094-.237-.364-.517-.904-1.076L18.544 12" />
                        </g>
                    </svg>
                    Certificate of completion
                </span>
            </div>
        </div>
        <div class="section py-4 ">
            <div class="head">Description</div>
            <div class="dtext w-7">
                <p class="m-0 z-2">
                    {{selectedCourse?.description.slice(0,300)}}
                </p>
                <input type="checkbox" name="check" id="check">
                <label *ngIf="selectedCourse?.description.length > 300"
                    class="label z-3 text-green-500 cursor-pointer readBtn py-2 " for="check">Read more...</label>
                <p *ngIf="selectedCourse?.description.length > 300" class="restPara z-2 m-0 mt-2 ">
                    {{selectedCourse?.description.slice(300)}}
                </p>
                <label *ngIf="selectedCourse?.description.length > 300"
                    class="label2 z-3 text-green-500 cursor-pointer py-2  " for="check">Read less...</label>

            </div>
        </div>

        <!-- Videos Array -->
        <div class="section py-4">
            <div class="head">
                Course content
            </div>
            <div class="accordian w-7">
                <ng-container *ngFor="let item of sectionList; index as idx">
                    <p-accordion *ngIf="item.videos.length > 0" size="small" [activeIndex]="[0]">
                        <p-accordionTab>
                            <ng-template pTemplate="header">
                                <span class="flex align-items-center justify-content-between w-full">
                                    <div>Section {{idx+1}}. {{item.sectionName}}</div>
                                    <div class="text-sm text-600 font-normal "> {{item.videos.length}} lectures</div>
                                </span>
                            </ng-template>
                            <ng-container *ngFor="let cont of item.videos; index as vidIdx">
                                <p class="flex align-items-center gap-2 px-2 ">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                                        <g fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path
                                                d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12s0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z" />
                                            <path stroke-linecap="round"
                                                d="M21.5 8h-19m8-5.5L7 8m10-5.5L13.5 8m1.5 6.5c0-.633-.662-1.06-1.986-1.915c-1.342-.866-2.013-1.299-2.514-.98c-.5.317-.5 1.176-.5 2.895s0 2.578.5 2.896s1.172-.115 2.514-.981C14.338 15.56 15 15.133 15 14.5Z" />
                                        </g>
                                    </svg>
                                    Lecture {{vidIdx+1}}. {{cont.name}}
                                </p>
                            </ng-container>
                        </p-accordionTab>
                    </p-accordion>
                </ng-container>
            </div>
        </div>

        <div class="section py-4">
            <div class="head">Rating & reviews</div>
            <div class="raterev flex align-items-center gap-7 py-4 mb-4 border-bottom-2 w-7 border-300     ">
                <span class="flex align-items-center gap-1 text-lg font-bold">
                    <svg style="color : #f1b10e;" xmlns="http://www.w3.org/2000/svg" width="25" height="25"
                        viewBox="0 0 24 24">
                        <path fill="currentColor"
                            d="M9.153 5.408C10.42 3.136 11.053 2 12 2s1.58 1.136 2.847 3.408l.328.588c.36.646.54.969.82 1.182s.63.292 1.33.45l.636.144c2.46.557 3.689.835 3.982 1.776c.292.94-.546 1.921-2.223 3.882l-.434.507c-.476.557-.715.836-.822 1.18c-.107.345-.071.717.001 1.46l.066.677c.253 2.617.38 3.925-.386 4.506s-1.918.051-4.22-1.009l-.597-.274c-.654-.302-.981-.452-1.328-.452s-.674.15-1.328.452l-.596.274c-2.303 1.06-3.455 1.59-4.22 1.01c-.767-.582-.64-1.89-.387-4.507l.066-.676c.072-.744.108-1.116 0-1.46c-.106-.345-.345-.624-.821-1.18l-.434-.508c-1.677-1.96-2.515-2.941-2.223-3.882S3.58 8.328 6.04 7.772l.636-.144c.699-.158 1.048-.237 1.329-.45s.46-.536.82-1.182z" />
                    </svg>
                    4.7 course rating
                </span>
                <span class="flex align-items-center gap-1 text-lg font-bold">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24">
                        <circle cx="9.001" cy="6" r="4" fill="currentColor" />
                        <ellipse cx="9.001" cy="17.001" fill="currentColor" rx="7" ry="4" />
                        <path fill="currentColor"
                            d="M21 17c0 1.657-2.036 3-4.521 3c.732-.8 1.236-1.805 1.236-2.998c0-1.195-.505-2.2-1.239-3.001C18.962 14 21 15.344 21 17M18 6a3 3 0 0 1-4.029 2.82A5.7 5.7 0 0 0 14.714 6c0-1.025-.27-1.987-.742-2.819A3 3 0 0 1 18 6.001" />
                    </svg>
                    {{reviewsArr?.length}} ratings
                </span>
            </div>
            <!-- <div class="reviewsCont w-7 flex flex-column gap-6 ">
                <ng-container *ngFor="let item of reviewsArr">
                    <div class="rateCard">
                        <div class="header flex align-items-center gap-3 mb-2 ">
                            <div class="imgCont w-1">
                                <img src="https://images.unsplash.com/photo-1560250097-0b93528c311a?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZSUyMGltYWdlfGVufDB8fDB8fHww"
                                    alt="" class="w-full border-1 profileImg ">
                            </div>
                            <div class="namestar flex flex-column align-items-start ">
                                <div class="name font-bold text-xl"> {{item.username}} </div>
                                <div style="color :#ffbb00;" class="stars flex gap-1 align-items-center">
                                    <ng-container *ngFor="let star of getStars(item.rating)">
                                        <img  src="https://img.icons8.com/metro/16/ffbb00/filled-star.png" alt="filled-star"/>
                                    </ng-container>
                                    <ng-container *ngFor="let star of getRemainingStars(item.rating)">
                                        <img  src="https://img.icons8.com/metro/16/ffbb00/star.png" alt="star"/>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <div class="desc">
                            Lorem, ipsum dolor sit amet consectetur adipisicing elit. Dicta provident odio unde non
                            saepe itaque dolores eveniet est ipsam totam.
                        </div>
                    </div>
                </ng-container>
            </div> -->
        </div>
        <div class="section py-4">
            <div class="head">
                Instructor
            </div>
            <div class="insInfo">
                <div class="inshead mb-3 flex gap-4 align-items-center">
                    <div class="imgcont">
                        <img [src]="selectedCourse?.educator?.edId?.profileImage" alt="" class="w-full teacherImg"
                            style="border-radius: 400px;">
                    </div>
                    <div class="info">
                        <div class="name text-xl text-green-500 font-bold">{{selectedCourse?.educator?.edname}}</div>
                        <div>Founder CEO,Corporate Trainer,Programming Aficionado</div>
                        <div class=" mt-3 stcr flex flex-column gap-2">
                            <div class="students flex align-items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="20" viewBox="0 0 640 512">
                                    <path fill="currentColor"
                                        d="M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64s-64 28.7-64 64s28.7 64 64 64m448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64s-64 28.7-64 64s28.7 64 64 64m32 32h-64c-17.6 0-33.5 7.1-45.1 18.6c40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64m-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32S208 82.1 208 144s50.1 112 112 112m76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2m-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4" />
                                </svg>
                                12,345 students.
                            </div>
                            <div class="courses flex align-items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 26 26">
                                    <path fill="currentColor"
                                        d="M9.875 0a1 1 0 0 0-.406.156S8.204.952 6.844 1.813c-1.36.86-2.873 1.808-3.219 2l-.063.03C2.306 4.618 2.045 5.884 2 6.594c-.003.033 0 .06 0 .095c-.011.266 0 .437 0 .437v13.063C2 22.087 4.213 23 6.313 23c.7 0 1.4-.113 2-.313c.4-.2.687-.6.687-1v-10.5c0-2.3.5-3.38 2-4.28c.4-.2 4.594-3.095 4.594-3.095c.2-.2.406-.606.406-.906v-.094c0-.4-.2-.706-.5-.906s-.7-.2-1 0c-.1.1-6.2 4.207-7.5 4.907c-1.3.8-2.513.993-2.813.593c-.093-.093-.174-.378-.187-.656v-.063c.001-.272.071-.784.625-1.125c.562-.313 1.957-1.204 3.313-2.062c.573-.363.644-.402 1.093-.688A1 1 0 0 0 11 2.5V1a1 1 0 0 0-1.125-1m8 3.5a1 1 0 0 0-.438.188s-5.034 3.387-5.906 3.968l-.031.032c-.724.543-1.153 1.189-1.344 1.78A3.3 3.3 0 0 0 10 10.5v.313a1 1 0 0 0 0 .093V23c0 1.9 2.188 3 4.188 3c.9 0 1.712-.194 2.312-.594c1.2-.7 7-5.218 7-5.218c.3-.2.5-.482.5-.782v-13c0-.5-.194-.8-.594-1c-.3-.2-.793-.106-1.093.094c-1.6 1.2-5.907 4.588-6.907 5.188c-1.4.8-2.719 1-3.219.5c-.2-.2-.187-.388-.187-.688q.008-.26.063-.438c.056-.174.17-.388.593-.718c.02-.016.01-.015.031-.031c.723-.483 2.934-1.99 4.376-2.97A1 1 0 0 0 19 6V4.5a1 1 0 0 0-1.125-1M22 10.813v2l-5 3.874v-2z" />
                                </svg>
                                8 courses.
                            </div>
                        </div>
                    </div>

                </div>
                <div class="dtext w-7">
                    <p class="m-0 z-2">
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi ipsam animi tenetur in eaque
                        enim quo, harum labore optio facilis officiis corrupti impedit ullam nobis, architecto tempora
                        aperiam
                        officia aliquam! Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo maiores rem
                        non?
                        Fugiat eius dignissimos repellat totam quibusdam eveniet laboriosam.
                    </p>
                    <input type="checkbox" name="check" id="check2">
                    <label class="labelv2 z-3 text-green-500 cursor-pointer readBtn py-2 " for="check2">Read
                        more...</label>
                    <p class="restPara2 z-2 m-0 mt-2 ">
                        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aut, sed tenetur culpa rerum vel
                        recusandae, reprehenderit nostrum et a sequi perferendis atque corrupti ipsum ab! Numquam
                        consectetur ipsam officiis sint.
                    </p>
                    <label class="label2v2 z-3 text-green-500 cursor-pointer py-2  " for="check2">Read less...</label>

                </div>
            </div>
        </div>
    </div>
    <div>
        <app-footer></app-footer>
    </div>
</div>