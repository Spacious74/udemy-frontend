<div class="container m-auto flex gap-6" style="width: 90%;">

    @if(cartItemsLength === 0) {
    <div class="flex flex-column align-items-center justify-content-center gap-2" style="width: 100%; height: 75vh;">
        <img src="../../../assets/images/Empty-Order--Streamline-Tokyo.png" alt="Empty Cart"
            class="w-16rem h-16rem mb-3" />
        <div class="text-lg font-bold text-600">Missing Cart items?</div>
        <div class="text-600">Login to see the items you added previously</div>
        <p-divider align="center" type="solid" styleClass="w-20rem">
            <b>or</b>
        </p-divider>
        <p-button label="Browse Courses" (onClick)="navigateToHome()" class="mt-1"></p-button>
    </div>
    }@else {

    <div class="cartcontainer mt-5" style="width: 70%;">

        <div class="flex align-items-center justify-content-between mb-1 ">
            <span class="head">Cart</span>
            <span class="items text-right">
                {{(cartItemsLength === 1)? cartItemsLength+' course in cart' : cartItemsLength+' courses in cart'}}
            </span>
        </div>

        <div class="cart flex flex-column gap-3">
            @for (item of cartData ; track $index) {
            <div class="item-card flex gap-3 align-items-center justify-content-between">
                <div class="flex gap-3 align-items-center">
                    <img [src]="item.coursePoster.url" [alt]="item.courseName"
                        class="h-8rem border-1 border-100 border-round" style="object-fit: cover; width : 200px">
                    <div class="flex flex-column align-items-center sm:align-items-start gap-1">
                        <div class="text-lg font-bold text-900 font-bold">{{ item.courseName }}</div>
                        <div class="text-sm ">Instructor - {{item.educatorName}}</div>
                        <div class="lec text-sm flex gap-2">
                            <span class="lecture">{{item.lectures}} Lectures</span> ·
                            <span class="lecture">{{item.level}}</span> ·
                            <span class="lecture">{{item.language}}</span>
                        </div>
                    </div>
                </div>
                <div class="pr-4 w-2 flex align-items-end gap-4 flex-column justify-content-between">
                    <span class="text-lg font-semibold">{{ '₹ ' + item.coursePrice }}</span>
                    <span class="delete-btn flex align-items-center cursor-pointer"
                        (click)="removeFromCart(item.courseId)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
                            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2"
                                d="m19.5 5.5l-.62 10.025c-.158 2.561-.237 3.842-.88 4.763a4 4 0 0 1-1.2 1.128c-.957.584-2.24.584-4.806.584c-2.57 0-3.855 0-4.814-.585a4 4 0 0 1-1.2-1.13c-.642-.922-.72-2.205-.874-4.77L4.5 5.5M3 5.5h18m-4.944 0l-.683-1.408c-.453-.936-.68-1.403-1.071-1.695a2 2 0 0 0-.275-.172C13.594 2 13.074 2 12.035 2c-1.066 0-1.599 0-2.04.234a2 2 0 0 0-.278.18c-.395.303-.616.788-1.058 1.757L8.053 5.5m1.447 11v-6m5 6v-6"
                                color="currentColor" />
                        </svg>
                    </span>
                </div>
            </div>
            }
        </div>

    </div>

    <div *ngIf="cartItemsLength > 0" style="width: 30%;">

        <div class="p-fluid border-1 p-4 border-round-xl border-100 mt-5">
            <div class="text-xl font-semibold mb-4">Order Summary</div>
            <div class="flex flex-column gap-2 text-800 mb-4">

                <div class="flex justify-content-between align-items-center">
                    <span class="">Cart Price</span>
                    <span class="">₹ {{totalCartPrice}}</span>
                </div>
                <div class="flex justify-content-between align-items-center">
                    <span class="">Discount</span>
                    <span class="">{{discountPercentage}}%</span>
                </div>
                <div class="flex justify-content-between align-items-center">
                    <span class="">Discounted Price</span>
                    <span class="text-green"> - ₹{{totalCartPrice-discountedPrice}}</span>
                </div>
                <div class="my-2" style="background-color: #e0e0e0; display: block; height: 1px; width: 100%;"></div>
                <div class="flex justify-content-between align-items-center">
                    <span class="font-semibold">Final Price</span>
                    <span class="font-semibold">₹ {{discountedPrice}}</span>
                </div>
            </div>

            <p-button class="w-full" label="Checkout" iconPos="right" icon="pi pi-arrow-right"
            (onClick)="goToOrderSummaryPage()" ></p-button>
        </div>

    </div>
    }


</div>